<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>D3 football chart samples</title>
  <meta name="description" content="D3 chart samples for football charting">
  <meta name="author" content="Alex Couch">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONTS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Work+Sans:400,500" rel="stylesheet">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="../RBR_charts/css/rbr_charts.css">

  <!-- D3 script for charts
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <script src="../RBR_charts/d3/4.2.2/d3.min.js"></script>

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="images/favicon.png">

</head>
<body>

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div class="container">
    <div class="row">
      <div class="eight columns" style="margin-top: 10%">
        <h3>D3 football chart&nbsp;samples</h3>
        <label>from Alex Couch, <a href="https://medium.com/alex-couch-s-portfolio" target="_blank">product designer</a></label>
        <p>Hi there. In preparation for the 2016 football season, I’ve been building charts for my favorite Alabama sports blog, <a href="http://rollbamaroll.com" target="_blank">Roll Bama Roll</a>. I’ve done <a href="http://medium.com/alex-couch-s-portfolio/what-does-a-football-game-look-like-32c899ab39a4#.3ildtbato" target="_blank">some</a> football charting explorations already, but it’s been extra fun to see them come to life in a responsive, reproducible way.</p>
        <p>More charts will be on the blog in the coming months, but I wanted to post a sample in the meantime. I'm using <a href="https://d3js.org" target="_blank">D3.js</a> to render the charts with real data, and some modifications on the <a href="http://getskeleton.com" target="_blank">Skeleton</a> framework for the rest of the page. The game was the Alabama vs. Michigan State 2015 <a href="http://www.espn.com/college-football/game?gameId=400852732" target="_blank">Cotton Bowl</a>. Enjoy.</p>
      </div>
    </div>
    <div class="row">
      <div class="nine columns explain">
        <label>About the definitions</label>
        <p>A <span class="bold">"successful"</span> play, as <a href="http://www.footballoutsiders.com/stats/ncaaoff" target="_blank">defined</a> by Football Outsiders, is basically when a play gains enough yardage to keep the offense on track, i.e., <span class="highlight">50% of needed yardage on 1st down, 70% on 2nd, or 100% on 3rd/4th.</span></p>
        <p>A <span class="bold">"big play"</span> (aka an "explosive play") has different definitions depending on the analyst, but I use a generous one: <span class="highlight">a run of &#8805;12 yards, or a pass of &#8805;16, is a big play.</span></p>
      </div>
    </div>
  <!-- SRXR charts
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <div class="row chart-row">
      <div class="nine columns">
        <h5 class="chartTitle">Success and big play rates</h5>
        <div class="titleHR"></div>
        <p class="chartSubtitle">
          <span class="xRed">&#9679;&nbsp;</span>Big play rate (XR) and <span class="sRed">&#9679;&nbsp;</span>Success rate (SR)
        </p>
        <div id="srxr-q-charts-container">
          <script src="../RBR_charts/2016_BamaWKU/SRXR_quarters/BamaWKU_SRXR_Quarters.js"></script>
        </div>
        <p class="chartNote srxr-note">* NCAA average SR = 42%</p>
      </div>
    </div>
    <div class="row">
      <div class = "eight columns">
        <p>Here's a simple application of success metrics in a game. Quarters aren’t the most refined unit of game time you can examine, but they're easy and there’s already contextual understanding. Here, it’s interesting to see that while the game was consistently lopsided on a success/efficiency basis, the big play rates trended the other way.</p>
        <p>These two bar charts are actually the same D3 function with the team names, filters, and colors pulled in as arguments. This saved me some lines of code in the JS file, but it pulls from the source (a hosted .csv file) twice, which isn’t optimal. At some point I’ll rebuild it to avoid that overhead.</p>
      </div>
    </div>

  <!-- Play quintiles chart
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <div class="row chart-row">
      <div class="nine columns">
        <h5 class="chartTitle">Plays by outcome</h5>
        <div class="titleHR"></div>
        <p class="chartSubtitle">
          <span class="ltRed">&#9679;&nbsp;</span>Unsuccessful, <span class="sRed">&#9679;&nbsp;</span>Successful, and&nbsp;<span class="xRed">&#9679;&nbsp;</span>Big play
        </p>
        <div id="plays-charts-container">
          <script src="../RBR_charts/2016_BamaWKU/Plays_quintiles/BamaWKU_Plays_Quintiles.js"></script>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="eight columns">
        <p>The gameflow dot-plot-like chart was prominently featured in my original piece about football charting (where the dots <a href="https://medium.com/alex-couch-s-portfolio/what-does-a-football-game-look-like-32c899ab39a4#.6hnaue3ei" target="_blank">look much more dot-like</a>). The quarter quintiles help show a more granular “flow” to the game by breaking down quarters according to game clock (15:00 left, then 12:, 9:, 6:, 3:). The resulting illustration is interesting, but I’m not sure that it’s superior to the prior chart, in part because people can interpret the columns as offensive drives (which they're not).</p>
        <p>I had to work around my D3 capabilities here a fair bit. For example, using rectangles instead of circles to represent plays: instead of rendering and arranging individual plays according to all the needed dimensions, I drew the quarter quintiles as cascading vertical bars (first the unsuccessful plays, then successful, then big plays), then drew the grid on top. I’m happy with the result for now, but would like to later re-build the dot plot so that I can introduce interactivity (e.g., hovering over a play brings up the play description) and layer on play-specific info.</p>
      </div>
    </div>

    <!-- new runPass chart by plays/drives, not quintiles
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <div class="row chart-row">
      <div class="nine columns">
        <h5 class="chartTitle">Running and Passing</h5>
        <div class="titleHR"></div>
        <div id="runPass-charts-container">
          <div id="runPass-rate-chart">
            <p class="chartSubtitle"><span class="sRed">&#9679;&nbsp;</span>Run rate (runs &#247; total plays), cumulative</p>
          </div><!-- No spaces
       --><div id="runPass-sr-chart">
            <p class="chartSubtitle">Success rate for <span class="sRed">&#9679;&nbsp;</span>runs and <span class="ltRed">&#9679;&nbsp;</span>passes, cumulative</p>
          </div>
          <script src="../RBR_charts/2016_BamaWKU/RunRate_cume/BamaWKU_RunPass.js"></script>
          <script>
            runPass_charts("https://couchux.github.io/RBR_charts/2016_BamaWKU/BamaWKU_Plays_all.csv","Alabama","WKU",.75, .4)
          </script>
        </div>
        <p class="chartNote runRate-note">* NCAA average SR = 42%</p>
      </div>
    </div>
    <div class="row">
      <div class="eight columns">
        <p>The line charts were fun for a few reasons. For one, Alabama football fans love when the team runs the ball, so it’s funny to see that passing was the more successful endeavor in this game (and how the offensive coordinator followed that trend by passing more often, up until the team was way ahead).</p>
        <p>Also, this is the kind of chart where D3 is the most helpful: drawing multipoint SVG images (like a polyline) and placing them on HTML. A developer friend even said that bar charts might be executed better in pure HTML, rather than even using SVGs. Be that as it may, I’m happy with how things have progressed.</p>
      </div>
    </div>
    <div class="row">
      <div class="eight columns">
        <p>That’s all for now. More to come this season!</p>
        <p>- Alex</p>
        <p><a href="https://medium.com/alex-couch-s-portfolio">my portfolio</a> |
            <a href="http://bit.ly/couch-linkedin">my LinkedIn</a></p>
      </div>
  </div>
  <div class="row" style="margin-bottom: 10%;">
    <div class="nine columns">
      <table id="runDir-table"><tr><th>Run Direction</th><th class="col-right">Plays</th><th class="col-right">Success Rate</th><th class="col-right">Big Play Rate</th></tr>
        <tr><td>Left end</td><td class="col-right bold-rbr">8</td><td class="col-right bold-rbr">38%</td><td class="col-right"></td></tr>
        <tr><td>Left tackle</td><td class="col-right bold-rbr">4</td><td class="col-right">25%</td><td class="col-right"></td></tr>
        <tr class="tr-heavy"><td>Left guard</td><td class="col-right">1</td><td class="col-right">100%</td><td class="col-right"></td></tr>
        <tr><td>Middle</td><td class="col-right bold-rbr">8</td><td class="col-right" style="color:red; font-weight:bold;">13%</td><td class="col-right"></td></tr>
        <tr><td>QB draw</td><td class="col-right">2</td><td class="col-right">50%</td><td class="col-right"></td></tr>
        <tr class="tr-heavy"><td>RB draw</td><td class="col-right">1</td><td class="col-right">100%</td><td class="col-right"></td></tr>
        <tr><td>Right guard</td><td class="col-right">3</td><td class="col-right">33%</td><td class="col-right bold-rbr">33%</td></tr>
        <tr><td>Right tackle</td><td class="col-right bold-rbr">4</td><td class="col-right bold-rbr">50%</td><td class="col-right bold-rbr">25%</td></tr>
        <tr class="tr-heavy"><td>Right end</td><td class="col-right bold-rbr">4</td><td class="col-right bold-rbr">50%</td><td class="col-right"></td></tr>
        <tr><td>Reverse</td><td class="col-right">1</td><td class="col-right">100%</td><td class="col-right"></td></tr>
      </table>
    </div>
  </div>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>
