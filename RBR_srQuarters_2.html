<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,300' rel='stylesheet' type='text/css'>
  <script src="https://d3js.org/d3.v4.min.js"></script>
<!-- then some style tags-->

</head>
<body>
<script>

/* select what csv and teams should be run */
var csv_url = "https://couchux.github.io/BAMA-MSU_SRbyQuarter.csv",
    whichTeam = ["Alabama",
                 "Michigan State"]

/* tie chart colors to team names */
var teamColors = {
  "Alabama": "#C31C45",
  "Michigan State": "#205649"
}

var gameColor = "#4A4A4A"

teamColor = function(team_name) {
  return teamColors[team_name]
};

/* defining the main chart functions */

function qsrChart(data_url, which_team) {
  d3.csv(data_url, csv_response)
}

function csv_response(error, data) {
  if (error) {
    console.error(error)
  }
  else {
    console.log("data loaded")
    qData = data.filter(function(row){
      return row.Team == whichTeam[0]
    })
    renderChart()
  }
}

/* building the chart in d3 */
function renderChart() {

  svg = d3.select("body")
    .append("svg")
    .attr("width","500")
    .attr("height","500")
  bars = svg.selectAll("rect").data(qData).enter()
    .append("rect")
    .attr("width","200")
    .attr("height","30")
    .attr("y",function(d,i) {return (i + 1) * 50})
    .style("fill",function(d) {
      if ( d.Quarter === "Game") {
        return gameColor
      }
      else {
        return teamColor(d.Team)
      }
    })
}


/* run the whole chart function */
qsrChart(csv_url, "Alabama"); //the latter part doesn't do anything, but I'd like to control the team from here
qsrChart(csv_url, "Michigan State");


</script>

</body>
<!--
svg = d3.select("body").append("svg").attr("width","500").attr("height","500")
bars = svg.selectAll("text").data(qData).enter().append("text").attr("width","30").attr("height","30").attr("y",function(d,i) {return (i + 1) * 50})

svg = d3.select("body").append("svg").attr("width","500").attr("height","500")
bars = svg.selectAll("rect").data(qData).enter().append("rect").attr("width","200").attr("height","30").attr("fill","#008080").attr("y",function(d,i) {return (i + 1) * 50})

this worked with a scale!
colorScale = d3.scaleOrdinal()
               .domain([
                 "Alabama",
                 "Michigan State"])
               .range([
                 "#C31C45",
                 "#205649"])

barsText.style("fill",function(d) {return colorScale(d.Team)})
-->


</html>
